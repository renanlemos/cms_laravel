$app.service('MenuService',function($resource,$http){this.menu=function(){return itens=[{display:"HOME",href:"/admin",title:"Home",apelido:"home",itemParent:false},{display:"SITE",href:"#",title:"Site",apelido:"site",itemParent:true,itens:[{display:"Configuração Global",href:"/admin/site/configuracao-global",title:"Configuração Global",apelido:"configuracao-global"}]},{display:"USUÁRIOS",href:"/admin/usuarios",title:"Usuários",apelido:"usuarios",itemParent:false},{display:"CONTEÚDO",href:"#",title:"Conteúdo",apelido:"conteudo",itemParent:true,itens:[{display:"Artigos",href:"/admin/conteudo/artigos",title:"Artigos",apelido:"artigos",itemParent:false},{display:"Mídias",href:"/admin/conteudo/midias",title:"Mídias",apelido:"midias",itemParent:false}]},{display:"COMPONENTES",title:"Componentes",href:"#",apelido:"componentes",itemParent:true,itens:[{display:"Banners",href:"/admin/componentes/banners",title:"Banners",apelido:"componente_banners",itemParent:false}]},{display:"MÓDULOS",title:"Módulos",href:"#",apelido:"modulos",itemParent:true,itens:[{display:"Posição",href:"/admin/modulos/modulo-posicao",title:"Módulo Posição",apelido:"modulo-posicao",itemParent:false},{display:"Html",href:"/admin/modulos/modulo-html",title:"Html",apelido:"modulo-html",itemParent:false}]},{display:"LOGS",title:"Logs",href:"/admin/logs",apelido:"logs",itemParent:false}];}
this.getTarifarios=function(){return $rootScope.cliente_tarifarios;}
this.getMenu=function(){return this.menu();}
this.updateClienteTarifarios=function(){var c=$resource('/tarifarios/tarifarios-cliente-logado');c.query(function(response){$cookies.cliente_tarifarios=angular.toJson(response);},function(response){alert("Erro ao carregar tarifários.");});}});$app.service("AuthService",function($rootScope,$resource,$location,$cookies,$timeout,$route){var permissoes="";this.verificaLogin=function(){var auth=$resource("/admin/auth/verify");auth.get(function(response){if(response.status==false){$rootScope.isLogado=false;$location.path("admin/login");}else{$rootScope.permissoes=angular.fromJson(response.data);permissoes=angular.fromJson(response.data);$rootScope.isLogado=true;$rootScope.nome_admin_logado=$cookies.nome_admin_logado;$rootScope.nome_usuario_admin_logado=$cookies.nome_usuario_admin_logado;$rootScope.id_usuario_admin_logado=$cookies.id_usuario_admin_logado;$rootScope.email_admin_logado=$cookies.email_admin_logado;}},function(response){});}
this.getPermissoes=function(){return $rootScope.permissoes;}
this.setPermissoes=function(data){$rootScope.permissoes=JSON.parse(data);}
this.getPermissao=function(apelido){var permissao=null;var search=false;if(search==false){angular.forEach(permissoes,function(value,key){if(apelido==value.nome){permissao=value;search=true;}});}
return permissao;}
this.checkView=function(apelido){var permissao=this.getPermissao(apelido);if(permissao==null){$location.path("admin/erro/403");return false;}
if(permissao.view==false){$location.path("admin/erro/403");}}
this.checkCreate=function(apelido){var permissao=this.getPermissao(apelido);if(permissao==null){alert("Sem permissão para criar.");return false;}
if(permissao.create==false){alert("Sem permissão para criar.");}
return permissao.create;}
this.checkUpdate=function(apelido){var permissao=this.getPermissao(apelido);if(permissao==null){alert("Sem permissão para alterar.");return false;}
if(permissao.update==false){alert("Sem permissão para alterar.");}
return permissao.update;}
this.checkDelete=function(apelido){var permissao=this.getPermissao(apelido);if(permissao==null){alert("Sem permissão para deletar.");return false;}
if(permissao.delete==false){alert("Sem permissão para deletar.");}
return permissao.delete;}
this.setLogin=function(user){$cookies.id_admin_logado=user[0].id;$cookies.nome_admin_logado=user[0].nome;$cookies.nome_usuario_admin_logado=user[0].nome_usuario;$cookies.email_admin_logado=user[0].email;}});