$app.directive('modulo',function($resource,$compile){return{restrict:"E",scope:{posicao:"@posicao",modulo:"@data"},link:function(scope,element,attrs,model){var request=$resource('/modulos/get-modulos-posicao');var data={posicao:scope.posicao};request.query(data,function(response){if(response.length>0){angular.forEach(response,function(v,k){scope.modulo=v;var m=getModulo(v);var el=angular.element(m);compiled=$compile(el)(scope);element.append(compiled);});}},function(){});function getModulo(modulo){switch(modulo.tipo){case'html':return"<modulo-html data='modulo'></modulo-html>";break;case'banner-slider':return"<modulo-banner-slider data='modulo'></modulo-banner-slider>";break;}}}}});$app.directive('moduloHtml',function($compile){return{restrict:"E",scope:{modulo:"=data"},link:function(scope,element,attrs,model){var html="";var data=scope.modulo;var conteudo=data.conteudo;var titulo=data.titulo;var mostrar_titulo=data.mostrar_titulo;var tag_titulo=data.tag_titulo;if(mostrar_titulo==true){html+="<"+tag_titulo+">"+titulo+"</"+tag_titulo+">";}
html+=conteudo;var el=angular.element(html);compiled=$compile(el)(scope);element.html(compiled).show('fade');}}});$app.directive('moduloBannerSlider',function($resource,$compile){return{restrict:"E",scope:{modulo:"=data"},link:function(scope,element,attrs,model){var html="";var data=scope.modulo;var titulo=data.titulo;var mostrar_titulo=data.mostrar_titulo;var tag_titulo=data.tag_titulo;var parametros=angular.fromJson(data.parametros);var request=$resource('/modulos/banner-sliders/get-fotos');if(mostrar_titulo==true){html+="<"+tag_titulo+">"+titulo+"</"+tag_titulo+">";}
request.query({banner_id:parametros.banner_id},function(response){var banner=response;angular.forEach(banner,function(v,k){var image="/componentes/banner-slider/banner-"+v.banner_slider_id+"/"+v.imagem;if(v.url.length>0){html+="<a href='"+v.url+"' target='"+v.url_target+"'>";html+="<img src='"+image+"'>";html+="</a>";}else{html+="<img src='"+image+"'>";}});var el=angular.element(html);compiled=$compile(el)(scope);element.html(compiled).show('fade');},function(response){});}}});$app.directive('menuPrincipal',function(MenuService,$compile){return{restrict:"E",template:"<nav class='menu'><ul class='menu-body'></ul></div></nav>",link:function(scope,element,attrs,model){var menu=MenuService.getMenu();var menuHtml="";angular.forEach(menu,function(v,k){if(v.itemParent==false){menuHtml+="<li>";menuHtml+="<a href='"+v.href+"' title='"+v.title+"' ng-class='{active:currentLink == \""+v.href+"\"}'>";menuHtml+=v.display;menuHtml+="</a>";menuHtml+="</li>";}else{menuHtml+="<li>";menuHtml+="<a href='"+v.href+"' title='"+v.title+"' class='item-parent' menu-dropdown>";menuHtml+=v.display;menuHtml+="<span class='icon icon-arrow-right-2'></span>"
menuHtml+="</a>";menuHtml+="<ul class='sub-itens'>";angular.forEach(v.itens,function(v,k){menuHtml+="<li>";menuHtml+="<a href='"+v.href+"' title='"+v.title+"' ng-class='{active:currentLink == \""+v.href+"\"}'>";menuHtml+=v.display;menuHtml+="</a>";menuHtml+="</li>";});menuHtml+="</ul>";menuHtml+="</li>";}});var el=angular.element(menuHtml);compiled=$compile(el)(scope);element.find('ul').html(compiled);}}});